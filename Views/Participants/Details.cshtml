@model BulgarianTraditionsAndCustoms.Models.Participant

@{
	ViewData["Title"] = "Details";
}

<div class="container">
	<section id="post">
		<!-- Heading -->
		<h1 class="mb-3 fw-bold">
			@Model.Name
		</h1>
		<hr />

		<!-- Image -->
		@if (Model.ImagePath != null)
		{
			<div class="mb-4">
				<img src="@Model.ImagePath"
					 alt="@Model.Name"
					 class="img-fluid w-100 rounded"
					 style="max-height: 60vh; object-fit: cover;">
			</div>
		}

		<!-- Description -->
		<div class="fs-5 lh-lg">
			@Model.Description
		</div>

		<br />
		<hr />
		<br />

		<h4>Традиции</h4>

		@if (Model.TraditionParticipants.Any())
		{
			<table class="table table-sm">
				<thead>
					<tr>
						<th>Име</th>
						<th>Роля</th>
						<th>Описание</th>
					</tr>
				</thead>
				<tbody>
					@foreach (var tp in Model.TraditionParticipants)
					{
						<tr>
							<td>@tp.Tradition.Name</td>
							<td>@(tp.ParticipantRole ?? tp.Participant.Role ?? "—")</td>
							<td>@tp.Tradition.Description</td>
						</tr>
					}
				</tbody>
			</table>
		}
		else
		{
			<p class="text-muted">Няма добавени традиции</p>
		}

		<div class="mt-4 d-flex justify-content-between align-items-center">

			<!-- Back to index -->
			<a asp-action="Index" asp-controller="Participants" class="btn btn-outline-secondary">
				<i class="bi bi-arrow-left"></i>
				Към каталога
			</a>

			@if (User.IsInRole("Admin"))
			{
				<!-- Action buttons -->
				<div role="group" aria-label="Действия върху участника">
					<a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-warning">
						<i class="bi bi-pencil-square"></i>
						Редактиране
					</a>

					<button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal-@Model.Id">
						<i class="bi bi-trash"></i>
						Изтриване
					</button>
				</div>
			}
		</div>
		@if (User.IsInRole("Admin"))
		{
			<partial name="_ParticipantDeleteModal" model="Model" />
		}
	</section>
</div>